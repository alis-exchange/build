<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Setting up a gRPC server | Alis Build</title>
    <meta name="description" content="Documentation for Alis Build">
    <link rel="stylesheet" href="/assets/style.82fe078b.css">
    <link rel="modulepreload" href="/assets/app.a516543e.js">
    <link rel="modulepreload" href="/assets/guides_how-to-guides_setting-up-gRPC-server.md.da6bc64f.lean.js">
    
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-c6a644e1><!--[--><!--]--><!--[--><span tabindex="-1" data-v-151f2593></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-151f2593> Skip to content </a><!--]--><!----><header class="VPNav" data-v-c6a644e1 data-v-a71a30f1><div class="VPNavBar has-sidebar" data-v-a71a30f1 data-v-6f1d18b5><div class="container" data-v-6f1d18b5><div class="VPNavBarTitle has-sidebar" data-v-6f1d18b5 data-v-d5925166><a class="title" href="/" data-v-d5925166><!--[--><!--]--><!--[--><img class="VPImage logo" src="/assets/site-icon.png" alt data-v-8e4dd84f><!--]--><!--[-->Docs<!--]--><!--[--><!--]--></a></div><div class="content" data-v-6f1d18b5><!--[--><!--]--><!----><!----><!----><div class="VPNavBarAppearance appearance" data-v-6f1d18b5 data-v-a3e7452b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-a3e7452b data-v-1899cd41 data-v-086e8519><span class="check" data-v-086e8519><span class="icon" data-v-086e8519><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-1899cd41><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-1899cd41><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6f1d18b5 data-v-738bef5a data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/alis-exchange/build" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="https://www.youtube.com/channel/UCcUppUH_3cLwHUEJ7e4lLLg/featured" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>YouTube</title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6f1d18b5 data-v-e4361c82 data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6ffb57d3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-6ffb57d3><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><!----><!--[--><!--[--><!----><div class="group" data-v-e4361c82><div class="item appearance" data-v-e4361c82><p class="label" data-v-e4361c82>Appearance</p><div class="appearance-action" data-v-e4361c82><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-e4361c82 data-v-1899cd41 data-v-086e8519><span class="check" data-v-086e8519><span class="icon" data-v-086e8519><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-1899cd41><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-1899cd41><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-e4361c82><div class="item social-links" data-v-e4361c82><div class="VPSocialLinks social-links-list" data-v-e4361c82 data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/alis-exchange/build" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="https://www.youtube.com/channel/UCcUppUH_3cLwHUEJ7e4lLLg/featured" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>YouTube</title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6f1d18b5 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-c6a644e1 data-v-aac27d5e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-aac27d5e><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-aac27d5e><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-aac27d5e>Menu</span></button><a class="top-link" href="#" data-v-aac27d5e> Return to top </a></div><aside class="VPSidebar" data-v-c6a644e1 data-v-f332cb62><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-f332cb62><span class="visually-hidden" id="sidebar-aria-label" data-v-f332cb62> Sidebar Navigation </span><!--[--><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible" data-v-f332cb62 data-v-35f99ef5><div class="title" role="button" data-v-35f99ef5><h2 class="title-text" data-v-35f99ef5>Getting Started</h2><div class="action" data-v-35f99ef5><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-35f99ef5><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-35f99ef5><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-35f99ef5><!--[--><!--[--><a class="VPLink link link" href="/guides/getting-started/introduction.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Introduction</span><!--]--><!----></a><!----><!--]--><!--[--><span class="VPLink link" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Overview</span><!--]--><!----></span><!--[--><!--[--><a class="VPLink link link" href="/guides/getting-started/conceptual-framework.html" style="padding-left:16px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text light" data-v-2cfe069a>Conceptual framework</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guides/getting-started/developer-flow.html" style="padding-left:16px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text light" data-v-2cfe069a>Developer flow</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guides/getting-started/consumer-experience.html" style="padding-left:16px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text light" data-v-2cfe069a>Consumer experience</span><!--]--><!----></a><!----><!--]--><!--]--><!--]--><!--[--><a class="VPLink link link" href="/guides/getting-started/command-line-interface.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Alis CLI installation</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible collapsed" data-v-f332cb62 data-v-35f99ef5><div class="title" role="button" data-v-35f99ef5><h2 class="title-text" data-v-35f99ef5>How-to-guides</h2><div class="action" data-v-35f99ef5><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-35f99ef5><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-35f99ef5><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-35f99ef5><!--[--><!--[--><a class="VPLink link link" href="/guides/how-to-guides/make-your-first-request.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Make a request to a product</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guides/how-to-guides/auto-generated-docs.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Leverage auto-generated documentation</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guides/how-to-guides/proto-visibility-scopes.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Specify proto visibility scopes</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guides/how-to-guides/configure-your-IDE.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Configure your IDE</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible collapsed" data-v-f332cb62 data-v-35f99ef5><div class="title" role="button" data-v-35f99ef5><h2 class="title-text" data-v-35f99ef5>Further Reading</h2><div class="action" data-v-35f99ef5><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-35f99ef5><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-35f99ef5><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-35f99ef5><!--[--><!--[--><a class="VPLink link link" href="/guides/references/resource-oriented-design.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Resource-oriented design</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guides/references/core-technologies.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Core technologies</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-c6a644e1 data-v-c95df128><div class="VPDoc has-sidebar has-aside" data-v-c95df128 data-v-37ebe389><div class="container" data-v-37ebe389><div class="aside" data-v-37ebe389><div class="aside-curtain" data-v-37ebe389></div><div class="aside-container" data-v-37ebe389><div class="aside-content" data-v-37ebe389><div class="VPDocAside" data-v-37ebe389 data-v-afc4c1a1><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-afc4c1a1 data-v-2865c0b0><div class="content" data-v-2865c0b0><div class="outline-marker" data-v-2865c0b0></div><div class="outline-title" data-v-2865c0b0>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-2865c0b0><span class="visually-hidden" id="doc-outline-aria-label" data-v-2865c0b0> Table of Contents for current page </span><ul class="root" data-v-2865c0b0 data-v-1188541a><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-afc4c1a1></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-37ebe389><div class="content-container" data-v-37ebe389><!--[--><!--]--><main class="main" data-v-37ebe389><div style="position:relative;" class="vp-doc _guides_how-to-guides_setting-up-gRPC-server" data-v-37ebe389><div><h1 id="setting-up-a-grpc-server" tabindex="-1">Setting up a gRPC server <a class="header-anchor" href="#setting-up-a-grpc-server" aria-hidden="true">#</a></h1><p>This tutorial will provide an overview of setting up a gRPC server in your language of choice and will offer instructions <em><strong>specific to Alis Build</strong></em>. You will learn how to:</p><ul><li>create and populate the <code>.proto</code> file</li><li>release a protobuf package</li><li>implement the business logic behind your methods</li><li>generate the client and server side protobuf stubs</li><li>deploy the neuron to serve traffic</li></ul><p>For a more general tutorial on setting up gRPC servers and clients, please refer to <a href="https://grpc.io/docs/languages/" target="_blank" rel="noreferrer">the official gRPC documentation</a>.</p><div class="info custom-block"><p class="custom-block-title">Before you begin</p><p>This guide assumes the user has an understanding of the <a href="https://grpc.io/docs/languages/" target="_blank" rel="noreferrer">programming language</a> they wish to implement the server in, as well as an understanding of <a href="/guides/references/core-technologies.html#grpc">protocol buffers</a> and <a href="/guides/references/core-technologies.html#grpc">gRPC</a>.</p></div><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-hidden="true">#</a></h2><p>To get started with this tutorial, there are a couple things you need to have done as an Alis Builder:</p><ol><li>Ensure you have installed and set up the <a href="./../getting-started/command-line-interface.html">Alis CLI</a></li><li>Ensure you have <a href="./../getting-started/conceptual-framework.html">created a product on Alis Exchange</a></li></ol><h2 id="the-proto-definition-defining-our-example-service" tabindex="-1">The Proto Definition: defining our example service <a class="header-anchor" href="#the-proto-definition-defining-our-example-service" aria-hidden="true">#</a></h2><p>For this example, we will use the simple &quot;Books&quot; service as specified in the <a href="./../getting-started/consumer-experience.html">consumer experience docs</a> and used extensively throughout Google&#39;s <a href="https://google.aip.dev/" target="_blank" rel="noreferrer">API Improvement Proposals(AIPs)</a>. The definitions here differ slightly from the AIPs for simplicity&#39;s sake.</p><p>The <code>.proto</code> file for the Books service consists of a service and methods, and the various messages as specified below:</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code>// The BooksService
service BooksService {
  // Get a specific book.
  rpc GetBook(GetBookRequest) returns (Book) {
    option (google.api.http) = {
      get: &quot;/resources/books/v1/{name=books/*}&quot;
    };
    option (google.api.method_signature) = &quot;name&quot;;
  }
  // List all available books.
  rpc ListBooks(ListBooksRequest) returns (ListBooksResponse) {
    option (google.api.http) = {
      get: &quot;/resources/books/v1/books&quot;
    };
  }
  // Create a book
  rpc CreateBook(CreateBookRequest) returns (Book) {
    option (google.api.http) = {
      post: &quot;/resources/books/v1/books&quot;
      body: &quot;book&quot;
    };
    option (google.api.method_signature) = &quot;book,book_id&quot;;
  }
}

// The definition of a book resource.
message Book {
  // The name of the book.
  // Format: books/{book}.
  string name = 1 [(google.api.field_behavior) = OUTPUT_ONLY];

  // The display name of the book.
  string display_name = 2 [(google.api.field_behavior) = REQUIRED];

  // The authors of the book.
  repeated string authors = 3 [(google.api.field_behavior) = REQUIRED];

  // The publisher of the book
  string publisher = 4 [(google.api.field_behavior) = REQUIRED];
}

// Request message for the GetBook method
message GetBookRequest {
  // The name of the book to retrieve.
  // Format: books/{book}
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      type: &quot;library.googleapis.com/Book&quot;
    }];
}

// Request message for the ListBooks method
message ListBooksRequest {
  // The maximum number of books to return. The service may return fewer than
  // this value.
  // If unspecified, at most 50 books will be returned.
  // The maximum value is 1000; values above 1000 will be coerced to 1000.
  int32 page_size = 1;

  // A page token, received from a previous `ListBooks` call.
  // Provide this to retrieve the subsequent page.
  //
  // When paginating, all other parameters provided to `ListBooks` must match
  // the call that provided the page token.
  string page_token = 2;
}
// Response message for the ListBooks method
message ListBooksResponse {
  // The books from the specified publisher.
  repeated Book books = 1;

  // A token, which can be sent as `page_token` to retrieve the next page.
  // If this field is omitted, there are no subsequent pages.
  string next_page_token = 2;
}
</code></pre></div><h3 id="on-alis-build" tabindex="-1">On Alis Build <a class="header-anchor" href="#on-alis-build" aria-hidden="true">#</a></h3><p>To create a new proto on Alis Exchange run <code>alis proto create {orgID}.{productID}.{resources|services}-{neuronName}-{neuronVersion}</code> (e.g. <code>alis proto create xmpl.br.resources-books-v1</code>).</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Throughout this example, we will use the &quot;Example Organisation&quot; (with id <code>xmpl</code>), the &quot;Books repository&quot; product (with id <code>br</code>) and neuron <code>resources-books-v1</code>. The domain for this organisation is &quot;example.services&quot; - please be sure to adapt the example commands to your organisation and product.</p></div><p>This will create a new <code>.proto</code> file, which you will then populate with the services, methods and messages you require. This file will be located in the <code>alis.exchange</code> directory at <code>alis.exchange/{orgID}/proto/{orgID}/{productID}/{resources|services}/{neuronName}/{neuronVersion}</code></p><h2 id="publishing-the-initial-protobuf-package" tabindex="-1">Publishing the initial protobuf package <a class="header-anchor" href="#publishing-the-initial-protobuf-package" aria-hidden="true">#</a></h2><p>Once you are happy with your proto definition, run <code>alis proto release {orgID}.{productID}.{resources|services}-{neuronName}-{neuronVersion}</code>. This will publish the protobuf package in various languages, for use by clients, and will be used for code generation when commencing server implementation.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>The Alis OS generates boilerplate code to kick of your server implementation based off of the contents of your <code>.proto</code> files. By putting effort into deciding on a robust API definition up-front, it helps the Alis Build platform to relieve you of redundant tasks.</p></div><h2 id="implementing-the-server" tabindex="-1">Implementing the server <a class="header-anchor" href="#implementing-the-server" aria-hidden="true">#</a></h2><p>Once you have released your protos, implementation of the server can begin. This is done by creating a new <a href="./../getting-started/conceptual-framework.html">neuron</a> on Alis Exchange. To create a new neuron, run <code>alis neuron create {orgID}.{productID}.{resources|services}-{neuronName}-{neuronVersion}</code> (e.g. <code>alis neuron create xmpl.br.resources-books-v1</code>). Upon creating a neuron, you will be prompted whether you would like boilerplate code. Type <code>y</code> and select the language which you would like to implement the server in.</p><p>The boilerplate code that is given to you will look something like this:</p><h3 id="server" tabindex="-1">Server <a class="header-anchor" href="#server" aria-hidden="true">#</a></h3><p>The <code>server</code> is responsible for registering your implementation of the service interface (as implemented in the <code>methods</code>) with the gRPC server and makes this available to serve traffic on the specified port (the default port for cloud run).</p><div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"><!--[--><!--]--></ul><div class="tabs-component-panels"><!--[--><section style="display:none;" id="go" aria-hidden="true" class="tabs-component-panel" role="tabpanel"><!--[--><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;log&quot;</span>
	<span class="token string">&quot;net&quot;</span>
	<span class="token string">&quot;os&quot;</span>

	<span class="token string">&quot;cloud.google.com/go/firestore&quot;</span>
	<span class="token string">&quot;google.golang.org/grpc&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// client is a global client, initialized once per cloud run instance.</span>
<span class="token keyword">var</span> <span class="token punctuation">(</span>
	firestoreClient  <span class="token operator">*</span>firestore<span class="token punctuation">.</span>Client
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// Pre-declare err to avoid shadowing.</span>
	<span class="token keyword">var</span> err <span class="token builtin">error</span>

	<span class="token comment">// Disable log prefixes such as the default timestamp.</span>
	<span class="token comment">// Prefix text prevents the message from being parsed as JSON.</span>
	<span class="token comment">// A timestamp is added when shipping logs to Cloud Logging.</span>
	log<span class="token punctuation">.</span><span class="token function">SetFlags</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

	<span class="token comment">// Ensure required envs are set.</span>
	<span class="token keyword">if</span> os<span class="token punctuation">.</span><span class="token function">Getenv</span><span class="token punctuation">(</span><span class="token string">&quot;ALIS_OS_PROJECT&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span><span class="token string">&quot;ALIS_OS_PROJECT env not set.&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// TODO: add/remove required clients.</span>
	<span class="token comment">// Initialise Firestore client</span>
	firestoreProject<span class="token punctuation">,</span> err <span class="token operator">=</span> firestore<span class="token punctuation">.</span><span class="token function">NewClient</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> projectID<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;firestore.NewClient: %v&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>Entry<span class="token punctuation">{</span>Message<span class="token punctuation">:</span> <span class="token string">&quot;starting server...&quot;</span><span class="token punctuation">,</span> Severity<span class="token punctuation">:</span> LogSeverity_NOTICE<span class="token punctuation">}</span><span class="token punctuation">)</span>

	port <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Getenv</span><span class="token punctuation">(</span><span class="token string">&quot;PORT&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> port <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span>
		port <span class="token operator">=</span> <span class="token string">&quot;8080&quot;</span>
		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>Entry<span class="token punctuation">{</span>Message<span class="token punctuation">:</span> <span class="token string">&quot;Defaulting to port &quot;</span> <span class="token operator">+</span> port<span class="token punctuation">,</span> Severity<span class="token punctuation">:</span> LogSeverity_WARNING<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	listener<span class="token punctuation">,</span> err <span class="token operator">:=</span> net<span class="token punctuation">.</span><span class="token function">Listen</span><span class="token punctuation">(</span><span class="token string">&quot;tcp&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;:&quot;</span><span class="token operator">+</span>port<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;net.Listen: %v&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	grpcServer <span class="token operator">:=</span> grpc<span class="token punctuation">.</span><span class="token function">NewServer</span><span class="token punctuation">(</span>grpc<span class="token punctuation">.</span><span class="token function">UnaryInterceptor</span><span class="token punctuation">(</span>serverInterceptor<span class="token punctuation">)</span><span class="token punctuation">)</span>
	pb<span class="token punctuation">.</span><span class="token function">RegisterServiceServer</span><span class="token punctuation">(</span>grpcServer<span class="token punctuation">,</span> <span class="token operator">&amp;</span>myService<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">=</span> grpcServer<span class="token punctuation">.</span><span class="token function">Serve</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// serverInterceptor is an example of a Server Interceptor which could be used to &#39;inject&#39;</span>
<span class="token comment">// for example logs and/or tracing details to incoming server requests.</span>
<span class="token comment">// Add this method to your grpc server connection, for example</span>
<span class="token comment">// grpcServer := grpc.NewServer(grpc.UnaryInterceptor(serverInterceptor))</span>
<span class="token comment">//	pb.RegisterServiceServer(grpcServer, &amp;myService{})</span>
<span class="token keyword">func</span> <span class="token function">serverInterceptor</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> req <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> info <span class="token operator">*</span>grpc<span class="token punctuation">.</span>UnaryServerInfo<span class="token punctuation">,</span> handler grpc<span class="token punctuation">.</span>UnaryHandler<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// Calls the handler</span>
	h<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">handler</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> req<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>Entry<span class="token punctuation">{</span>Message<span class="token punctuation">:</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%v&quot;</span><span class="token punctuation">,</span> req<span class="token punctuation">)</span><span class="token punctuation">,</span> Severity<span class="token punctuation">:</span> LogSeverity_DEBUG<span class="token punctuation">,</span> Trace<span class="token punctuation">:</span> <span class="token function">getTrace</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>Entry<span class="token punctuation">{</span>
			Message<span class="token punctuation">:</span>  err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			Severity<span class="token punctuation">:</span> LogSeverity_WARNING<span class="token punctuation">,</span>
			Trace<span class="token punctuation">:</span>    <span class="token function">getTrace</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> h<span class="token punctuation">,</span> err
<span class="token punctuation">}</span>
</code></pre></div><!--]--></section><section style="display:none;" id="python" aria-hidden="true" class="tabs-component-panel" role="tabpanel"><!--[--><div class="language-python"><button class="copy"></button><span class="lang">python</span><pre><code><span class="token keyword">from</span> concurrent <span class="token keyword">import</span> futures
<span class="token keyword">import</span> grpc
<span class="token keyword">import</span> logging

<span class="token comment"># import methods for service</span>
<span class="token keyword">import</span> methods

<span class="token comment"># protobuf imports</span>

<span class="token keyword">from</span> xmpl<span class="token punctuation">.</span>br<span class="token punctuation">.</span>resources<span class="token punctuation">.</span>books<span class="token punctuation">.</span>v1 <span class="token keyword">import</span> books_pb2_grpc <span class="token keyword">as</span> books_pb_grpc


MAX_MESSAGE_SIZE <span class="token operator">=</span> <span class="token number">2000000000</span>

<span class="token keyword">def</span> <span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># creates a Server with which RPCs can be serviced</span>
    server <span class="token operator">=</span> grpc<span class="token punctuation">.</span>server<span class="token punctuation">(</span>futures<span class="token punctuation">.</span>ThreadPoolExecutor<span class="token punctuation">(</span>max_workers<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> options<span class="token operator">=</span><span class="token punctuation">[</span>
        <span class="token comment"># (&#39;grpc.max_send_message_length&#39;, MAX_MESSAGE_LENGTH),</span>
        <span class="token punctuation">(</span><span class="token string">&#39;grpc.max_receive_message_length&#39;</span><span class="token punctuation">,</span> MAX_MESSAGE_SIZE<span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>


    books_pb_grpc<span class="token punctuation">.</span>add_BooksServiceServicer_to_server<span class="token punctuation">(</span>methods<span class="token punctuation">.</span>BooksService<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> server<span class="token punctuation">)</span>


    <span class="token comment"># open an insecure port for accepting RPCs</span>
    server<span class="token punctuation">.</span>add_insecure_port<span class="token punctuation">(</span><span class="token string">&#39;0.0.0.0:8080&#39;</span><span class="token punctuation">)</span>

    <span class="token comment"># start the server</span>
    server<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>

    logging<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">&quot;Listening on %s.&quot;</span><span class="token punctuation">,</span> <span class="token string">&#39;0.0.0.0:8080&#39;</span><span class="token punctuation">)</span>

    <span class="token comment"># block current thread until the server stops</span>
    server<span class="token punctuation">.</span>wait_for_termination<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span>
    logging<span class="token punctuation">.</span>basicConfig<span class="token punctuation">(</span>level<span class="token operator">=</span>logging<span class="token punctuation">.</span>INFO<span class="token punctuation">)</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token comment"># begin serving traffic</span>
        serve<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">except</span> BaseException <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        logging<span class="token punctuation">.</span>error<span class="token punctuation">(</span>stacklevel<span class="token operator">=</span>logging<span class="token punctuation">.</span>INFO<span class="token punctuation">,</span> msg<span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><!--]--></section><!--]--></div></div><h3 id="methods" tabindex="-1">Methods <a class="header-anchor" href="#methods" aria-hidden="true">#</a></h3><p>The <code>methods</code> is where we implement the service interface and write the business logic that sits behind our methods.</p><div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"><!--[--><!--]--></ul><div class="tabs-component-panels"><!--[--><section style="display:none;" id="go" aria-hidden="true" class="tabs-component-panel" role="tabpanel"><!--[--><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;context&quot;</span>

	<span class="token string">&quot;google.golang.org/genproto/googleapis/longrunning&quot;</span>
	<span class="token string">&quot;google.golang.org/grpc/codes&quot;</span>
	<span class="token string">&quot;google.golang.org/grpc/status&quot;</span>
	<span class="token string">&quot;google.golang.org/protobuf/types/known/emptypb&quot;</span>

	pb <span class="token string">&quot;go.protobuf.example.domain/xmpl/br/resources/books/v1&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// Create a Service object which we&#39;ll register with the Server</span>
<span class="token keyword">type</span> myService <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    pb<span class="token punctuation">.</span>UnimplementedBooksServiceServer
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>myService<span class="token punctuation">)</span> <span class="token function">GetBook</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> req <span class="token operator">*</span>pb<span class="token punctuation">.</span>GetBookRequest<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>pb<span class="token punctuation">.</span>Book<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//TODO: Implement logic here.</span>
    <span class="token keyword">return</span> <span class="token operator">&amp;</span>pb<span class="token punctuation">.</span>Book<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>myService<span class="token punctuation">)</span> <span class="token function">ListBooks</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> req <span class="token operator">*</span>pb<span class="token punctuation">.</span>ListBooksRequest<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>pb<span class="token punctuation">.</span>ListBooksResponse<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//TODO: Implement logic here.</span>
    <span class="token keyword">return</span> <span class="token operator">&amp;</span>pb<span class="token punctuation">.</span>ListBooksResponse<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>myService<span class="token punctuation">)</span> <span class="token function">CreateBook</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> req <span class="token operator">*</span>pb<span class="token punctuation">.</span>CreateBookRequest<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>pb<span class="token punctuation">.</span>Book<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//TODO: Implement logic here.</span>
    <span class="token keyword">return</span> <span class="token operator">&amp;</span>pb<span class="token punctuation">.</span>Book<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

</code></pre></div><!--]--></section><section style="display:none;" id="python" aria-hidden="true" class="tabs-component-panel" role="tabpanel"><!--[--><div class="language-python"><button class="copy"></button><span class="lang">python</span><pre><code><span class="token keyword">import</span> grpc
<span class="token keyword">import</span> logging

<span class="token comment"># import alis_ os module and attaches the cloud logging handler to the python logging if run in production.</span>
<span class="token comment"># from alis.os import os as alis_os</span>
<span class="token comment"># alis_os = alis_os.Os(org_project=&quot;alis-os&quot;, org_domain=&quot;alis.capital&quot;, log_level=&quot;DEBUG&quot;)</span>

<span class="token comment"># protobuf imports</span>

<span class="token keyword">from</span> xmpl<span class="token punctuation">.</span>br<span class="token punctuation">.</span>resources<span class="token punctuation">.</span>books<span class="token punctuation">.</span>v1 <span class="token keyword">import</span> books_pb2_grpc <span class="token keyword">as</span> books_pb_grpc
<span class="token keyword">import</span> google<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>firestore <span class="token keyword">as</span> firestore

firestore_client <span class="token operator">=</span> firestore<span class="token punctuation">.</span>Client<span class="token punctuation">(</span>project<span class="token operator">=</span>os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">&#39;ALIS_OS_PROJECT&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">BooksService</span><span class="token punctuation">(</span>books_pb_grpc<span class="token punctuation">.</span>BooksService<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            logging<span class="token punctuation">.</span>basicConfig<span class="token punctuation">(</span>level<span class="token operator">=</span>logging<span class="token punctuation">.</span>INFO<span class="token punctuation">)</span>


    <span class="token keyword">def</span> <span class="token function">GetBook</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">:</span>books_pb<span class="token punctuation">.</span>GetBookRequest<span class="token punctuation">,</span> context<span class="token punctuation">:</span> grpc<span class="token punctuation">.</span>ServicerContext<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span> \
            <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">return</span> books_pb<span class="token punctuation">.</span>Book
          <span class="token comment"># TODO: implement logic here.</span>
          <span class="token keyword">return</span> books_pb<span class="token punctuation">.</span>Book<span class="token punctuation">(</span><span class="token punctuation">)</span>


    <span class="token keyword">def</span> <span class="token function">ListBooks</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">:</span>books_pb<span class="token punctuation">.</span>ListBooksRequest<span class="token punctuation">,</span> context<span class="token punctuation">:</span> grpc<span class="token punctuation">.</span>ServicerContext<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span> \
            <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">return</span> books_pb<span class="token punctuation">.</span>ListBooksResponse
          <span class="token comment"># TODO: implement logic here.</span>
          <span class="token keyword">return</span> books_pb<span class="token punctuation">.</span>ListBooksResponse<span class="token punctuation">(</span><span class="token punctuation">)</span>


    <span class="token keyword">def</span> <span class="token function">CreateBook</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">:</span>books_pb<span class="token punctuation">.</span>CreateBookRequest<span class="token punctuation">,</span> context<span class="token punctuation">:</span> grpc<span class="token punctuation">.</span>ServicerContext<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span> \
            <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">return</span> books_pb<span class="token punctuation">.</span>Book
          <span class="token comment"># TODO: implement logic here.</span>
          <span class="token keyword">return</span> books_pb<span class="token punctuation">.</span>Book<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><!--]--></section><!--]--></div></div><h3 id="test" tabindex="-1">Test <a class="header-anchor" href="#test" aria-hidden="true">#</a></h3><p>The <code>test</code> is where we call the methods as specified in the <code>methods</code> to ensure they behave as we expect them to.</p><div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"><!--[--><!--]--></ul><div class="tabs-component-panels"><!--[--><section style="display:none;" id="go" aria-hidden="true" class="tabs-component-panel" role="tabpanel"><!--[--><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;context&quot;</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;log&quot;</span>
	<span class="token string">&quot;testing&quot;</span>

	pb <span class="token string">&quot;go.protobuf.example.domain/xmpl/br/resources/books/v1&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// Simulate a client object</span>
<span class="token keyword">var</span> client myService

<span class="token comment">// This init() function will only run when running Go tests.</span>
<span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// Include a link to the file location of where the log originated from</span>
	log<span class="token punctuation">.</span><span class="token function">SetFlags</span><span class="token punctuation">(</span>log<span class="token punctuation">.</span>Lshortfile<span class="token punctuation">)</span>

	client <span class="token operator">=</span> myService<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">TestMyService_GetBook</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// Construct a request message</span>
	req <span class="token operator">:=</span> pb<span class="token punctuation">.</span>GetBookRequest<span class="token punctuation">{</span><span class="token punctuation">}</span>

	<span class="token comment">// Run a method</span>
	res<span class="token punctuation">,</span> err <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">GetBook</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>req<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		t<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">TestMyService_ListBooks</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// Construct a request message</span>
	req <span class="token operator">:=</span> pb<span class="token punctuation">.</span>ListBooksRequest<span class="token punctuation">{</span><span class="token punctuation">}</span>

	<span class="token comment">// Run a method</span>
	res<span class="token punctuation">,</span> err <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">ListBooks</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>req<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		t<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">TestMyService_CreateBook</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// Construct a request message</span>
	req <span class="token operator">:=</span> pb<span class="token punctuation">.</span>CreateBookRequest<span class="token punctuation">{</span><span class="token punctuation">}</span>

	<span class="token comment">// Run a method</span>
	res<span class="token punctuation">,</span> err <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">CreateBook</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>req<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		t<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span>


</code></pre></div><!--]--></section><section style="display:none;" id="python" aria-hidden="true" class="tabs-component-panel" role="tabpanel"><!--[--><div class="language-python"><button class="copy"></button><span class="lang">python</span><pre><code><span class="token keyword">import</span> unittest
<span class="token keyword">from</span> grpc <span class="token keyword">import</span> StatusCode
<span class="token keyword">import</span> grpc_testing

<span class="token comment"># protobuf imports</span>

<span class="token keyword">from</span> xmpl<span class="token punctuation">.</span>br<span class="token punctuation">.</span>resources<span class="token punctuation">.</span>books<span class="token punctuation">.</span>v1 <span class="token keyword">import</span> books_pb2_grpc <span class="token keyword">as</span> books_pb_grpc



<span class="token keyword">class</span> <span class="token class-name">BooksServiceTest</span><span class="token punctuation">(</span>unitbooks<span class="token punctuation">.</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">setUp</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>_real_time <span class="token operator">=</span> grpc_booksing<span class="token punctuation">.</span>strict_real_time<span class="token punctuation">(</span><span class="token punctuation">)</span>
            descriptors_to_servicers <span class="token operator">=</span> <span class="token punctuation">{</span>
                books_pb<span class="token punctuation">.</span>DESCRIPTOR<span class="token punctuation">.</span>services_by_name<span class="token punctuation">[</span><span class="token string">&#39;BooksService&#39;</span><span class="token punctuation">]</span><span class="token punctuation">:</span> methods<span class="token punctuation">.</span>BooksService<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            self<span class="token punctuation">.</span>books_server <span class="token operator">=</span> grpc_booksing<span class="token punctuation">.</span>server_from_dictionary<span class="token punctuation">(</span>descriptors_to_servicers<span class="token punctuation">,</span> self<span class="token punctuation">.</span>_real_time<span class="token punctuation">)</span>


    <span class="token keyword">def</span> <span class="token function">books_get_book</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
          <span class="token comment"># TODO: add custom logic here</span>
          request <span class="token operator">=</span> books_pb<span class="token punctuation">.</span>GetBookRequest<span class="token punctuation">(</span><span class="token punctuation">)</span>
          rpc <span class="token operator">=</span> self<span class="token punctuation">.</span>books_server<span class="token punctuation">.</span>invoke_unary_unary<span class="token punctuation">(</span>
              books_pb<span class="token punctuation">.</span>DESCRIPTOR<span class="token punctuation">.</span>services_by_name<span class="token punctuation">[</span><span class="token string">&#39;BooksService&#39;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>methods_by_name<span class="token punctuation">[</span><span class="token string">&#39;GetBook&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              invocation_metadata<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
              request<span class="token operator">=</span>request<span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token boolean">None</span>
          <span class="token punctuation">)</span>
          response<span class="token punctuation">,</span> metadata<span class="token punctuation">,</span> code<span class="token punctuation">,</span> details <span class="token operator">=</span> rpc<span class="token punctuation">.</span>termination<span class="token punctuation">(</span><span class="token punctuation">)</span>
          self<span class="token punctuation">.</span>assertIs<span class="token punctuation">(</span>code<span class="token punctuation">,</span> StatusCode<span class="token punctuation">.</span>OK<span class="token punctuation">)</span>


    <span class="token keyword">def</span> <span class="token function">books_list_books</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
          <span class="token comment"># TODO: add custom logic here</span>
          request <span class="token operator">=</span> books_pb<span class="token punctuation">.</span>ListBooksRequest<span class="token punctuation">(</span><span class="token punctuation">)</span>
          rpc <span class="token operator">=</span> self<span class="token punctuation">.</span>books_server<span class="token punctuation">.</span>invoke_unary_unary<span class="token punctuation">(</span>
              books_pb<span class="token punctuation">.</span>DESCRIPTOR<span class="token punctuation">.</span>services_by_name<span class="token punctuation">[</span><span class="token string">&#39;BooksService&#39;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>methods_by_name<span class="token punctuation">[</span><span class="token string">&#39;ListBooks&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              invocation_metadata<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
              request<span class="token operator">=</span>request<span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token boolean">None</span>
          <span class="token punctuation">)</span>
          response<span class="token punctuation">,</span> metadata<span class="token punctuation">,</span> code<span class="token punctuation">,</span> details <span class="token operator">=</span> rpc<span class="token punctuation">.</span>termination<span class="token punctuation">(</span><span class="token punctuation">)</span>
          self<span class="token punctuation">.</span>assertIs<span class="token punctuation">(</span>code<span class="token punctuation">,</span> StatusCode<span class="token punctuation">.</span>OK<span class="token punctuation">)</span>


    <span class="token keyword">def</span> <span class="token function">books_create_book</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
          <span class="token comment"># TODO: add custom logic here</span>
          request <span class="token operator">=</span> books_pb<span class="token punctuation">.</span>CreateBookRequest<span class="token punctuation">(</span><span class="token punctuation">)</span>
          rpc <span class="token operator">=</span> self<span class="token punctuation">.</span>books_server<span class="token punctuation">.</span>invoke_unary_unary<span class="token punctuation">(</span>
              books_pb<span class="token punctuation">.</span>DESCRIPTOR<span class="token punctuation">.</span>services_by_name<span class="token punctuation">[</span><span class="token string">&#39;BooksService&#39;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>methods_by_name<span class="token punctuation">[</span><span class="token string">&#39;CreateBook&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              invocation_metadata<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
              request<span class="token operator">=</span>request<span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token boolean">None</span>
          <span class="token punctuation">)</span>
          response<span class="token punctuation">,</span> metadata<span class="token punctuation">,</span> code<span class="token punctuation">,</span> details <span class="token operator">=</span> rpc<span class="token punctuation">.</span>termination<span class="token punctuation">(</span><span class="token punctuation">)</span>
          self<span class="token punctuation">.</span>assertIs<span class="token punctuation">(</span>code<span class="token punctuation">,</span> StatusCode<span class="token punctuation">.</span>OK<span class="token punctuation">)</span>

</code></pre></div><!--]--></section><!--]--></div></div><h3 id="dockerfile" tabindex="-1">Dockerfile <a class="header-anchor" href="#dockerfile" aria-hidden="true">#</a></h3><p>The <code>Dockerfile</code> is where we containerize our application/server to be deployed to the cloud. At Alis, we make use of cloud run, which is why it is the terraform spec that comes as boilerplate code for deploying our Docker images to the cloud.</p><div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"><!--[--><!--]--></ul><div class="tabs-component-panels"><!--[--><section style="display:none;" id="go" aria-hidden="true" class="tabs-component-panel" role="tabpanel"><!--[--><div class="language-docker"><button class="copy"></button><span class="lang">docker</span><pre><code><span class="token instruction"><span class="token keyword">FROM</span> golang:1.17-buster <span class="token keyword">as</span> gobuilder</span>

<span class="token comment"># We use the cloud-sdk image since it already has the correct git credential helper setup.</span>
<span class="token comment"># Since go mod download uses git, this ensures that the go mod download finds our private repos stored on</span>
<span class="token comment"># Google Source Repository</span>
<span class="token instruction"><span class="token keyword">FROM</span> gcr.io/google.com/cloudsdktool/cloud-sdk <span class="token keyword">as</span> builder</span>
<span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">gobuilder</span></span> /usr/local/go/ /usr/local/go/</span>
<span class="token instruction"><span class="token keyword">ENV</span> PATH=<span class="token string">&quot;/usr/local/go/bin:${PATH}&quot;</span></span>

<span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>

<span class="token comment"># Retrieve application dependencies.</span>
<span class="token comment"># This allows the container build to reuse cached dependencies.</span>
<span class="token comment"># Expecting to copy go.mod and if present go.sum.</span>
<span class="token comment"># The .${_ORG}.dev packages are all private.  Configure GOPRIVATE as per:</span>
<span class="token comment">#   https://tip.golang.org/cmd/go/#hdr-Configuration_for_downloading_non_public_code</span>
<span class="token instruction"><span class="token keyword">RUN</span> go env -w GOPRIVATE=go.protobuf.example.domain</span>
<span class="token instruction"><span class="token keyword">COPY</span> go.* ./</span>
<span class="token instruction"><span class="token keyword">RUN</span> go mod download</span>

<span class="token comment"># Copy local code to the container image.</span>
<span class="token instruction"><span class="token keyword">COPY</span> . ./</span>

<span class="token comment"># Build the binary.</span>
<span class="token instruction"><span class="token keyword">RUN</span> go build -mod=readonly -v -o server</span>

<span class="token comment"># Use the official Debian slim image for a lean production container.</span>
<span class="token comment"># https://hub.docker.com/_/debian</span>
<span class="token comment"># https://docs.docker.com/develop/develop-images/multistage-build/#use-multi-stage-builds</span>
<span class="token instruction"><span class="token keyword">FROM</span> debian:buster-slim</span>
<span class="token instruction"><span class="token keyword">RUN</span> set -x &amp;&amp; apt-get update &amp;&amp; DEBIAN_FRONTEND=noninteractive apt-get install -y <span class="token operator">\</span>
    ca-certificates &amp;&amp; <span class="token operator">\</span>
    rm -rf /var/lib/apt/lists/*</span>

<span class="token comment"># Copy the binary to the production image from the builder stage.</span>
<span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">builder</span></span> /app/server /app/server</span>

<span class="token comment"># Run the web service on container startup.</span>
<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;/app/server&quot;</span>]</span>
</code></pre></div><!--]--></section><section style="display:none;" id="python" aria-hidden="true" class="tabs-component-panel" role="tabpanel"><!--[--><div class="language-docker"><button class="copy"></button><span class="lang">docker</span><pre><code><span class="token instruction"><span class="token keyword">FROM</span> python:3.8-slim</span>

<span class="token instruction"><span class="token keyword">RUN</span> apt-get update &amp;&amp; apt-get upgrade -y &amp;&amp; apt-get install -y git</span>
<span class="token instruction"><span class="token keyword">RUN</span> apt-get install -y sudo &amp;&amp; apt-get install -y build-essential</span>
<span class="token instruction"><span class="token keyword">RUN</span> sudo apt-get install manpages-dev</span>

<span class="token comment"># Copy local code to the container image.</span>
<span class="token instruction"><span class="token keyword">ENV</span> APP_HOME /app</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> <span class="token variable">$APP_HOME</span></span>
<span class="token instruction"><span class="token keyword">COPY</span> . .</span>

<span class="token comment"># Install production dependencies.</span>
<span class="token instruction"><span class="token keyword">RUN</span> pip3 install --upgrade setuptools</span>

<span class="token comment">#RUN pip3 install other dependencies</span>
<span class="token instruction"><span class="token keyword">RUN</span> pip3 install -r requirements.txt --no-cache</span>

<span class="token comment"># Install the keyring library provides applications with a way to access keyring backends, meaning operating system</span>
<span class="token comment"># and third-party credential stores, and install the Artifact Registry backend.</span>
<span class="token instruction"><span class="token keyword">RUN</span> pip3 install keyring</span>
<span class="token instruction"><span class="token keyword">RUN</span> pip3 install keyrings.google-artifactregistry-auth</span>

<span class="token comment"># install Alis Exchange protobufs</span>
<span class="token instruction"><span class="token keyword">RUN</span> pip3 install --index-url https://europe-west1-python.pkg.dev/exmpl-org-projectid/protobuf-python/simple/ example-domain-protobuf</span>

<span class="token instruction"><span class="token keyword">EXPOSE</span> 8080</span>

<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;python&quot;</span>, <span class="token string">&quot;server.py&quot;</span>]</span>
</code></pre></div><!--]--></section><!--]--></div></div><h3 id="terraform" tabindex="-1">Terraform <a class="header-anchor" href="#terraform" aria-hidden="true">#</a></h3><p>Upon neuron creation, some boilerplate terraform is added to the proto repo at the neuron level. This includes:</p><ol><li><code>cloudrun.tf</code></li><li><code>variables.tf</code></li><li><code>main.tf</code></li></ol><h2 id="local-development-and-testing" tabindex="-1">Local development and testing <a class="header-anchor" href="#local-development-and-testing" aria-hidden="true">#</a></h2><p>To generate stubs locally, <a href="https://grpc.io/docs/protoc-installation/" target="_blank" rel="noreferrer">install the <code>protoc</code> compiler</a> and then install the language specific plugins:</p><div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"><!--[--><!--]--></ul><div class="tabs-component-panels"><!--[--><section style="display:none;" id="go" aria-hidden="true" class="tabs-component-panel" role="tabpanel"><!--[--><ol><li>Ensure you have <a href="https://go.dev/doc/install" target="_blank" rel="noreferrer">Go installed</a></li><li>Install the Go protoc plugins:</li></ol><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code>go <span class="token function">install</span> google.golang.org/protobuf/cmd/protoc-gen-go@v1.28
go <span class="token function">install</span> google.golang.org/grpc/cmd/protoc-gen-go-grpc@v1.2
</code></pre></div><ol start="3"><li>Update your PATH so that the protoc compiler can find the plugins: <code>export PATH=&quot;$PATH:$(go env GOPATH)/bin&quot;</code></li></ol><!--]--></section><section style="display:none;" id="python" aria-hidden="true" class="tabs-component-panel" role="tabpanel"><!--[--><ol><li>Ensure you <code>python3.5</code> or higher installed and <code>pip</code> version 9.0.1 or higher</li><li>Upgrade pip if necessary: <code>python -m pip install --upgrade pip</code></li><li>Install gRPC and the python gRPC tools for interacting with the protoc compiler:</li></ol><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code>python <span class="token parameter variable">-m</span> pip <span class="token function">install</span> grpcio
python <span class="token parameter variable">-m</span> pip <span class="token function">install</span> grpcio-tools
</code></pre></div><!--]--></section><!--]--></div></div><p>To generate the client and server stubs for local testing and development run <code>alis gen protobuf --{language} {orgID}.{productID}.{resources|services}-{neuronName}-{neuronVersion}</code> - this will generate the stubs and store them at <code>alis.exchange/{orgID}/protobuf/{language}/{orgID}/{productID}/{resources|services}/ {neuronName}/{neuronVersion}</code></p><p>Under the hood, the Alis CLI runs a <code>protoc</code> command and facilitates the routes to the destination of your source protos and the destination to which the stubs should be output.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>For more information on which programming languages are currently supported run <code>alis gen protobuf --help</code>.</p></div><p>After generating your protobufs locally, to import them and use them for development purposes:</p><div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"><!--[--><!--]--></ul><div class="tabs-component-panels"><!--[--><section style="display:none;" id="go" aria-hidden="true" class="tabs-component-panel" role="tabpanel"><!--[--><ol><li>Uncomment the line <code>//replace go.protobuf.example.domain =&gt; ../../../../../../xmpl/protobuf/go</code> in your <code>go.mod</code></li><li>Delete the import for <code>go.protobuf.example.domain</code> if it exists</li><li>Run <code>go mod tidy</code></li></ol><!--]--></section><section style="display:none;" id="python" aria-hidden="true" class="tabs-component-panel" role="tabpanel"><!--[--><ol><li>Uncomment the line <code># ../../../../../protobuf/python</code> in your requirements.txt</li><li>Run <code>pip install -r requirements.txt</code></li></ol><!--]--></section><!--]--></div></div><p>Otherwise, to make use of the protobufs as published in your protobuf package</p><div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"><!--[--><!--]--></ul><div class="tabs-component-panels"><!--[--><section style="display:none;" id="go" aria-hidden="true" class="tabs-component-panel" role="tabpanel"><!--[--><ol><li>Add &quot;go.protobuf.example.domain&quot; to your GOPRIVATE environment variable, where example.domain will be replaced by your organisations domain</li></ol><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code>go <span class="token function">env</span> <span class="token parameter variable">-w</span> <span class="token assign-left variable">GOPRIVATE</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>go <span class="token function">env</span> GOPRIVATE<span class="token variable">)</span></span>,go.protobuf.example.domain
</code></pre></div><ol start="2"><li>Comment out the line <code>replace go.protobuf.example.domain =&gt; ../../../../../../xmpl/protobuf/go</code> in your <code>go.mod</code></li><li>Delete the import for <code>go.protobuf.example.domain</code> if it exists</li><li>Run <code>go mod tidy</code></li></ol><!--]--></section><section style="display:none;" id="python" aria-hidden="true" class="tabs-component-panel" role="tabpanel"><!--[--><ol><li>Comment out the line <code>../../../../../protobuf/python</code> in your requirements.txt</li><li>Run the following commands:</li></ol><div class="language-shell"><button class="copy"></button><span class="lang">shell</span><pre><code>pip3 <span class="token function">install</span> keyring <span class="token operator">&amp;&amp;</span>
pip3 <span class="token function">install</span> keyrings.google-artifactregistry-auth <span class="token operator">&amp;&amp;</span>
pip3 <span class="token function">install</span> --index-url https://europe-west1-python.pkg.dev/uni-org-zkw/protobuf-python/simple/ alis-university-protobuf
</code></pre></div><!--]--></section><!--]--></div></div><h2 id="implementing-the-methods" tabindex="-1">Implementing the methods <a class="header-anchor" href="#implementing-the-methods" aria-hidden="true">#</a></h2><p>Below is an example implementation which integrates with FireStore</p><div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"><!--[--><!--]--></ul><div class="tabs-component-panels"><!--[--><section style="display:none;" id="go" aria-hidden="true" class="tabs-component-panel" role="tabpanel"><!--[--><div class="language-go"><button class="copy"></button><span class="lang">go</span><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;context&quot;</span>
	pb <span class="token string">&quot;go.protobuf.alis.university/uni/bb/services/test/v1&quot;</span>
	<span class="token string">&quot;google.golang.org/grpc/codes&quot;</span>
	<span class="token string">&quot;google.golang.org/grpc/status&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// Create a Service object which we&#39;ll register with the Server</span>
<span class="token keyword">type</span> myService <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	pb<span class="token punctuation">.</span>UnimplementedBooksServiceServer
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>myService<span class="token punctuation">)</span> <span class="token function">GetBook</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> req <span class="token operator">*</span>pb<span class="token punctuation">.</span>GetBookRequest<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>pb<span class="token punctuation">.</span>Book<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// validate arguments</span>
	<span class="token keyword">if</span> req<span class="token punctuation">.</span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span> <span class="token comment">// requires a name</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> status<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span>codes<span class="token punctuation">.</span>InvalidArgument<span class="token punctuation">,</span> <span class="token string">&quot;name is a required field but was not provided&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// retrieve the object from firestore</span>
	object<span class="token punctuation">,</span> err <span class="token operator">:=</span> firestoreClient<span class="token punctuation">.</span><span class="token function">Doc</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> status<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span>codes<span class="token punctuation">.</span>NotFound<span class="token punctuation">,</span> <span class="token string">&quot;book (%s) not found&quot;</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// the Book message to return</span>
	book <span class="token operator">:=</span> <span class="token operator">&amp;</span>pb<span class="token punctuation">.</span>Book<span class="token punctuation">{</span><span class="token punctuation">}</span>
	err <span class="token operator">=</span> object<span class="token punctuation">.</span><span class="token function">DataTo</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span> <span class="token comment">// handle the error</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> status<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span>codes<span class="token punctuation">.</span>AlreadyExists<span class="token punctuation">,</span> <span class="token string">&quot;err writing firestore data to book: %s&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> book<span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>myService<span class="token punctuation">)</span> <span class="token function">ListBooks</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> req <span class="token operator">*</span>pb<span class="token punctuation">.</span>ListBooksRequest<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>pb<span class="token punctuation">.</span>ListBooksResponse<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// obtain the books collection object</span>
	objects<span class="token punctuation">,</span> err <span class="token operator">:=</span> firestoreClient<span class="token punctuation">.</span><span class="token function">Collection</span><span class="token punctuation">(</span><span class="token string">&quot;users&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Documents</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err
	<span class="token punctuation">}</span>

	<span class="token comment">// the User message to return</span>
	booksResponse <span class="token operator">:=</span> <span class="token operator">&amp;</span>pb<span class="token punctuation">.</span>ListBooksResponse<span class="token punctuation">{</span>
		Books<span class="token punctuation">:</span> <span class="token boolean">nil</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>objects<span class="token punctuation">)</span> <span class="token operator">||</span> i <span class="token operator">&lt;</span> req<span class="token punctuation">.</span><span class="token function">GetPageSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		book <span class="token operator">:=</span> <span class="token operator">&amp;</span>pb<span class="token punctuation">.</span>Book<span class="token punctuation">{</span><span class="token punctuation">}</span>
		err <span class="token operator">=</span> objects<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">DataTo</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span>
		booksResponse<span class="token punctuation">.</span>Books <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>booksResponse<span class="token punctuation">.</span><span class="token function">GetBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> book<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// TODO: this does not implement pagination</span>

	<span class="token keyword">return</span> booksResponse<span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>myService<span class="token punctuation">)</span> <span class="token function">CreateBook</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> req <span class="token operator">*</span>pb<span class="token punctuation">.</span>CreateBookRequest<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>pb<span class="token punctuation">.</span>Book<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// validate arguments</span>
	<span class="token keyword">if</span> req<span class="token punctuation">.</span><span class="token function">GetBookId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span> <span class="token comment">// requires a userId</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> status<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span>codes<span class="token punctuation">.</span>InvalidArgument<span class="token punctuation">,</span> <span class="token string">&quot;book_id is a required field but was not provided&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> req<span class="token punctuation">.</span><span class="token function">GetBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span> <span class="token comment">// requires a user object</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> status<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span>codes<span class="token punctuation">.</span>InvalidArgument<span class="token punctuation">,</span> <span class="token string">&quot;book is a required field but was not provided&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// set the resource name of the user</span>
	req<span class="token punctuation">.</span><span class="token function">GetBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">&quot;books/&quot;</span> <span class="token operator">+</span> req<span class="token punctuation">.</span><span class="token function">GetBookId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> firestoreClient<span class="token punctuation">.</span><span class="token function">Doc</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">GetBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> req<span class="token punctuation">.</span><span class="token function">GetBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> status<span class="token punctuation">.</span><span class="token function">Code</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">==</span> codes<span class="token punctuation">.</span>AlreadyExists <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> status<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span>codes<span class="token punctuation">.</span>AlreadyExists<span class="token punctuation">,</span> <span class="token string">&quot;the book (%s) already exists&quot;</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span><span class="token function">GetBookId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> status<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span>codes<span class="token punctuation">.</span>AlreadyExists<span class="token punctuation">,</span> <span class="token string">&quot;failed to create book&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> req<span class="token punctuation">.</span><span class="token function">GetBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

</code></pre></div><!--]--></section><section style="display:none;" id="python" aria-hidden="true" class="tabs-component-panel" role="tabpanel"><!--[--><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Coming soon</p></div><!--]--></section><!--]--></div></div><h2 id="deploying-your-server" tabindex="-1">Deploying your server <a class="header-anchor" href="#deploying-your-server" aria-hidden="true">#</a></h2><p>The <code>methods</code> is where your custom logic lives. Once you have populated the methods and response messages, we can release and deploy our neuron to serve traffic.</p><p>On Alis Build, run <code>alis neuron release {orgID}.{productID}.{resources|services}-{neuronName}-{neuronVersion}</code> to create a new neuron version. We can then deploy this version by running <code>alis neuron release {orgID}.{productID}.{resources|services}-{neuronName}-{neuronVersion}</code> and selecting the product deployment of choice or creating a new deployment if one does not exist.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Note that some of the clients you would like to create (like a Firestore client) require a google project id with the Firestore API enabled. In this case, you will only be able to test your methods after first creating a neuron deployment as the neuron deployment will set up the google project under which the Firestore will exist.</p></div><p>Your server will now be available to serve traffic on cloud run. Navigate to the product deployment Google project on <a href="https://console.cloud.google.com" target="_blank" rel="noreferrer">cloud console</a> to view the cloud run service.</p></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-37ebe389 data-v-a54a85bd><div class="edit-info" data-v-a54a85bd><div class="edit-link" data-v-a54a85bd><a class="VPLink link edit-link-button" href="https://github.com/alis-exchange/build/edit/main/docs/guides/how-to-guides/setting-up-gRPC-server.md" target="_blank" rel="noreferrer" data-v-a54a85bd data-v-3c355974><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-a54a85bd><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> Edit this page on GitHub<!--]--><!----></a></div><!----></div><div class="prev-next" data-v-a54a85bd><div class="pager" data-v-a54a85bd><!----></div><div class="pager" data-v-a54a85bd><a class="pager-link next" href="/guides/getting-started/introduction.html" data-v-a54a85bd><span class="desc" data-v-a54a85bd>Next page</span><span class="title" data-v-a54a85bd>Introduction</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"archive_local-folder-structure.md\":\"97d3dd75\",\"archive_navigating-gcp.md\":\"c9c16fb4\",\"guides_getting-started_command-line-interface.md\":\"085ae2b3\",\"guides_getting-started_conceptual-framework.md\":\"c09c18d6\",\"guides_getting-started_consumer-experience.md\":\"0080a921\",\"guides_getting-started_developer-flow.md\":\"eddd68d5\",\"guides_getting-started_introduction.md\":\"3d069c12\",\"guides_how-to-guides_auto-generated-docs.md\":\"d233fafd\",\"guides_how-to-guides_build-a-service_deploy.md\":\"6dcbd00e\",\"guides_how-to-guides_build-a-service_design.md\":\"09afce89\",\"guides_how-to-guides_build-a-service_implement.md\":\"ea145173\",\"guides_how-to-guides_build-a-service_overview.md\":\"1d8383b2\",\"guides_how-to-guides_configure-your-ide.md\":\"f93e6c7c\",\"guides_how-to-guides_make-your-first-request.md\":\"faa9e89f\",\"guides_how-to-guides_proto-visibility-scopes.md\":\"40d49bda\",\"guides_how-to-guides_setting-up-grpc-server.md\":\"da6bc64f\",\"guides_references_core-technologies.md\":\"3f95d703\",\"guides_references_resource-oriented-design.md\":\"9114c9e7\",\"index.md\":\"d21e7617\"}")</script>
    <script type="module" async src="/assets/app.a516543e.js"></script>
    
  </body>
</html>